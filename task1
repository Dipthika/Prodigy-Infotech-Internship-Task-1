import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

#  Load the CSV file
try:
    df = pd.read_csv("worldpopulationdata.csv")
    print("Dataset loaded successfully!")
except Exception as e:
    print("Error loading dataset:", e)
    exit()

# Show first few rows and column names
print("\nFirst 5 rows:")
print(df.head())

print("\n Column Names:")
print(df.columns.tolist())

# Define correct columns
categorical_column = 'Country Name'   # e.g., India, China
numerical_column = '2022'             # Population for 2022

# Clean data (remove NaNs)
df_clean = df[[categorical_column, numerical_column]].dropna()

# Bar Chart (Top 10 Countries by Population)
try:
    top10 = df_clean.sort_values(by=numerical_column, ascending=False).head(10)
    plt.figure(figsize=(10, 6))
    sns.barplot(data=top10, x=categorical_column, y=numerical_column, palette='viridis')
    plt.title(f'Top 10 Countries by Population in {numerical_column}')
    plt.xticks(rotation=45, ha='right')
    plt.tight_layout()
    plt.savefig('bar_chart_top10.png')
    plt.show()
    print("Bar chart saved as 'bar_chart_top10.png'")
except Exception as e:
    print(f"Error creating bar chart: {e}")

# Histogram (Population Distribution)
try:
    plt.figure(figsize=(8, 5))
    sns.histplot(df_clean[numerical_column], bins=20, kde=True, color='skyblue')
    plt.title(f'Population Distribution in {numerical_column}')
    plt.xlabel('Population')
    plt.ylabel('Frequency')
    plt.tight_layout()
    plt.savefig('population_histogram.png')
    plt.show()
    print("Histogram saved as 'population_histogram.png'")
except Exception as e:
    print(f"Error creating histogram: {e}")
